{% extends "base.html" %}
{% block content %}

<h2 class="section-title white">Manage Subscriptions</h2>

<div class="form-card">
    <h3 class="form-title">Add a Subscription</h3>

    {% if error %}
        <p class="form-error">{{ error }}</p>
    {% endif %}

    <form action="{{ url_for('subscriptions') }}" method="post">
        <input type="text" name="name" placeholder="Subscription Name" required class="input-field">
        <input type="number" step="0.01" name="price" placeholder="Price (€)" required class="input-field">

        <select name="billing_cycle" required class="input-field">
            <option value="">Billing Cycle</option>
            <option value="Monthly">Monthly</option>
            <option value="Yearly">Yearly</option>
        </select>

        <input type="date" name="next_payment_date" required class="input-field">

        <select name="category" required class="input-field">
            <option value="">Choose Category</option>
            <option value="Entertainment">Entertainment</option>
            <option value="Productivity">Productivity</option>
            <option value="Cloud Services">Cloud Services</option>
            <option value="Shopping">Shopping</option>
            <option value="Finance">Finance</option>
            <option value="Other">Other</option>
        </select>

        <button class="btn-primary btn-full">Add Subscription</button>
    </form>
</div>


<hr class="sep">

<h3 class="section-title">Your Subscriptions</h3>

{% if subs %}
<ul class="sub-list">
    {% for sub in subs %}
        <li class="sub-item">
            <strong>{{ sub.name }}</strong> – €{{ "%.2f"|format(sub.price) }}/{{ sub.billing_cycle }}
            <span class="sub-meta">
                Next: {{ sub.next_payment_date }}
                | Category: {{ sub.category }}
            </span>
        </li>
    {% endfor %}
</ul>
{% else %}
<p>No subscriptions added yet.</p>
{% endif %}

{% endblock %}